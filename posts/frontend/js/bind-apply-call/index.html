<h2 id=前言>前言</h2>
<p><strong>javaScript</strong> <font color=#c7254e style="background: #f9f2f4"> <strong>this</strong></font> 是會隨著當前的狀態而動態改變的，
複習一下以下程式碼的console.log的回傳。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=kd>var</span> <span class=nx>name</span> <span class=o>=</span> <span class=s1>&#39;Mars&#39;</span><span class=p>;</span>

<span class=kr>const</span> <span class=nx>obj</span><span class=o>=</span><span class=p>{</span>   
    <span class=nx>name</span><span class=o>:</span><span class=s1>&#39;Guest&#39;</span><span class=p>,</span>
    <span class=nx>fun</span><span class=o>:</span><span class=kd>function</span><span class=p>(){</span>
        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>name</span><span class=p>);</span>
    <span class=p>}</span>
<span class=p>};</span>

<span class=nx>obj</span><span class=p>.</span><span class=nx>fun</span><span class=p>();</span><span class=c1>//Guest
</span><span class=c1></span>
<span class=kr>const</span> <span class=nx>useFun</span> <span class=o>=</span> <span class=nx>obj</span><span class=p>.</span><span class=nx>fun</span><span class=p>;</span>
<span class=nx>useFun</span><span class=p>();</span><span class=c1>//Mars
</span><span class=c1></span>
</code></pre></div><p>如果不熟悉的話建議複習一下<a href=https://mars23003.github.io/blog/posts/frontend/js/this/>[JavaScript] this是什麼?</a>這篇文章。</p>
<h2 id=在開發的時候如果需要指定this的物件時要怎麼辦呢br>在開發的時候如果需要指定this的物件時要怎麼辦呢?</br></h2>
<p><font color=#c7254e style="background: #f9f2f4"> <strong>bind、apply、call</strong></font>均可以達到目的，只是用法稍微不同。</p>
<h2 id=bindapplycall-簡單整理>bind、apply、call 簡單整理</h2>
<p><font color=#c7254e style="background: #f9f2f4"> <strong>bind、apply、call</strong></font>都是function物件的方法，他們的用法都可以<strong>指定this、帶入參數</strong>。
這邊先做基本的表格整理，</p>
<table>
<thead>
<tr>
<th style=text-align:left></th>
<th>bind</th>
<th>apply</th>
<th>call</th>
</tr>
</thead>
<tbody>
<tr>
<td style=text-align:left>指定this</td>
<td>V</td>
<td>V</td>
<td>V</td>
</tr>
<tr>
<td style=text-align:left>帶入參數</td>
<td>V</td>
<td>V</td>
<td>V</td>
</tr>
<tr>
<td style=text-align:left>是否直接執行</td>
<td><font color=#c7254e> X</font></td>
<td>V</td>
<td>V</td>
</tr>
</tbody>
</table>
<h2 id=bind>bind</h2>
<p><font color=#c7254e style="background: #f9f2f4"> <strong>bind</strong></font>與其他兩種方法的最大差異為<em><strong>是否直接執行</strong></em>，</p>
<p><font color=#c7254e style="background: #f9f2f4"> <strong>bind</strong></font>比較像是回傳一個<strong>新的function</strong>而已，
若要執行的話需要另外<strong>寫執行function的動作</strong>。</p>
<h3 id=1-指定this是否直接執行>1. 指定this、是否直接執行</h3>
<p>以下面範例來解釋:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=kr>const</span> <span class=nx>obj</span><span class=o>=</span><span class=p>{</span>
    <span class=nx>name</span><span class=o>:</span><span class=s1>&#39;Mars&#39;</span><span class=p>,</span>
    <span class=nx>age</span><span class=o>:</span><span class=mi>18</span>
<span class=p>};</span>

<span class=kd>function</span> <span class=nx>fun</span><span class=p>(){</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Name:&#39;</span><span class=o>+</span><span class=k>this</span><span class=p>.</span><span class=nx>name</span><span class=o>+</span><span class=s1>&#39;_Age:&#39;</span><span class=o>+</span><span class=k>this</span><span class=p>.</span><span class=nx>age</span><span class=p>);</span>
<span class=p>}</span>

<span class=nx>fun</span><span class=p>();</span><span class=c1>//未使用bind/apply/call，若對this不熟悉將可能出現使用問題
</span><span class=c1></span>
<span class=kr>const</span> <span class=nx>funBind</span> <span class=o>=</span> <span class=nx>fun</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=nx>obj</span><span class=p>);</span><span class=c1>//透過bind綁定obj的物件給fun函式
</span><span class=c1></span><span class=nx>funBind</span><span class=p>();</span><span class=c1>//並透過新函式來呼叫
</span><span class=c1></span>
<span class=o>-----------------------------</span>
<span class=nx>Output</span><span class=o>:</span>
<span class=nx>Name</span><span class=o>:</span><span class=nx>_Age</span><span class=o>:</span><span class=kc>undefined</span>
<span class=nx>Name</span><span class=o>:</span><span class=nx>Mars_Age</span><span class=o>:</span><span class=mi>18</span>
</code></pre></div><blockquote>
<p><font color=#c7254e style="background: #f9f2f4"> <strong>fun() :</strong></font> 單純執行find()未使用bind/apply/call，若對this不熟悉將可能出現使用問題。</br>
<font color=#c7254e style="background: #f9f2f4"> <strong>const funBind = fun.bind(obj) :</strong></font> 透過bind綁定obj的物件給fun函式(<strong>指定this</strong>)。</br>
<font color=#c7254e style="background: #f9f2f4"> <strong>funBind() :</strong></font> 並透過新函式來呼叫(<strong>需要另外呼叫來執行</strong>)。</p>
</blockquote>
<h3 id=2-帶入參數>2. 帶入參數</h3>
<p>bind帶入參數會有一個限制，就是透過bind綁定過後的參數將不能更改。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=kr>const</span> <span class=nx>obj</span><span class=o>=</span><span class=p>{</span>
    <span class=nx>name</span><span class=o>:</span><span class=s1>&#39;Mars&#39;</span>
<span class=p>};</span>

<span class=kd>function</span> <span class=nx>fun</span><span class=p>(</span><span class=nx>age</span><span class=p>){</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Name:&#39;</span><span class=o>+</span><span class=k>this</span><span class=p>.</span><span class=nx>name</span><span class=o>+</span><span class=s1>&#39;_Age:&#39;</span><span class=o>+</span><span class=nx>age</span><span class=p>);</span>
<span class=p>}</span>

<span class=kr>const</span> <span class=nx>funBind</span> <span class=o>=</span> <span class=nx>fun</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=nx>obj</span><span class=p>,</span><span class=mi>18</span><span class=p>);</span>
<span class=nx>funBind</span><span class=p>();</span>
<span class=nx>funBind</span><span class=p>(</span><span class=mi>65</span><span class=p>);</span><span class=c1>//嘗試更改Age
</span><span class=c1></span><span class=o>-----------------------------</span>
<span class=nx>Output</span><span class=o>:</span>
<span class=nx>Name</span><span class=o>:</span><span class=nx>Mars_Age</span><span class=o>:</span><span class=mi>18</span>
<span class=nx>Name</span><span class=o>:</span><span class=nx>Mars_Age</span><span class=o>:</span><span class=mi>18</span><span class=c1>//還是一樣18
</span></code></pre></div><blockquote>
<p><font color=#c7254e style="background: #f9f2f4"> <strong>funBind(65) :</strong></font> 嘗試更改Age但是結果Age還是一樣18，代表不能更改。</p>
</blockquote>
<h2 id=applycall>apply、call</h2>
<p>apply、call這兩個方法比較相近，直接一起來看，
直接來看程式碼:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=kr>const</span> <span class=nx>obj</span><span class=o>=</span><span class=p>{</span>
    <span class=nx>name</span><span class=o>:</span><span class=s1>&#39;Mars&#39;</span>
<span class=p>};</span>

<span class=kd>function</span> <span class=nx>fun</span><span class=p>(</span><span class=nx>age</span><span class=p>,</span><span class=nx>sex</span><span class=p>){</span>
    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Name:&#39;</span><span class=o>+</span><span class=k>this</span><span class=p>.</span><span class=nx>name</span><span class=o>+</span><span class=s1>&#39;_Age:&#39;</span><span class=o>+</span><span class=nx>age</span><span class=o>+</span><span class=s1>&#39;_Sex:&#39;</span><span class=o>+</span><span class=nx>sex</span><span class=p>);</span>
<span class=p>}</span>

<span class=nx>fun</span><span class=p>.</span><span class=nx>apply</span><span class=p>(</span><span class=nx>obj</span><span class=p>,[</span><span class=mi>18</span><span class=p>,</span><span class=s1>&#39;male&#39;</span><span class=p>]);</span><span class=c1>//或fun.apply(obj,new Array(18,&#39;male&#39;));
</span><span class=c1></span><span class=nx>fun</span><span class=p>.</span><span class=nx>call</span><span class=p>(</span><span class=nx>obj</span><span class=p>,</span><span class=mi>18</span><span class=p>,</span><span class=s1>&#39;male&#39;</span><span class=p>);</span>
<span class=o>-----------------------------</span>
<span class=nx>Output</span><span class=o>:</span>
<span class=nx>Name</span><span class=o>:</span><span class=nx>Mars_Age</span><span class=o>:</span><span class=mi>18_</span><span class=nx>Sex</span><span class=o>:</span><span class=nx>male</span>
<span class=nx>Name</span><span class=o>:</span><span class=nx>Mars_Age</span><span class=o>:</span><span class=mi>18_</span><span class=nx>Sex</span><span class=o>:</span><span class=nx>male</span>
</code></pre></div><blockquote>
<p><font color=#c7254e style="background: #f9f2f4"> <strong>fun.apply(obj,[18,&lsquo;male&rsquo;]);</strong></font> <em><strong>直接執行</strong></em> 並 <em><strong>指定this</strong></em> 然後<em><strong>參數需要用陣列的方式帶入</strong></em>。</p>
</blockquote>
<blockquote>
<p><font color=#c7254e style="background: #f9f2f4"> <strong>fun.call(obj,18,&lsquo;male&rsquo;);</strong></font><em><strong>直接執行</strong></em> 並 <em><strong>指定this</strong></em> 然後<em><strong>參數直接帶入</strong></em>。</p>
</blockquote>
<h2>延伸閱讀</h2>
<ul>
<li><a href=/blog/posts/frontend/js/fuse-js-javascript-fuzzy-search-engine/>深入了解 Fuse.js：JavaScript 模糊搜尋</a></li>
<li><a href=/blog/posts/frontend/js/js-blob-download/>[JavaScript] 如何使用JavaScript與blob下載檔案？</a></li>
<li><a href=/blog/posts/frontend/js/this/>[JavaScript] this是什麼?</a></li>
<li><a href=/blog/posts/frontend/js/iife/>[JavaScript] 立即執行函式(IIFE)是什麼?</a></li>
<li><a href=/blog/posts/frontend/js/var-let-const/>[JavaScript] 不能不知道的 var、let、const 變數宣告</a></li>
</ul>