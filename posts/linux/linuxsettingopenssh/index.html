<p>當OS沒做更新時，因為資安或其他因素要更新在系統中安裝的工具時，往往會透過手動安裝的方式進行，以下的案例就是在手動更新OpenSSH後需要做的步驟</p>
<p>要讓系統使用手動安裝的 OpenSSH 伺服器版本，您需要修改 SSH 服務的啟動設定，
讓系統使用</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>/usr/local/sbin/sshd
</code></pre></div><p>而不是預設的</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>/usr/sbin/sshd。
</code></pre></div><p>以下是我的步驟，可能會因為OS不同有些許不同，我這邊以Ubuntu18來做範例</p>
<h3 id=1-停止現有的-ssh-服務>1. 停止現有的 SSH 服務：</h3>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-arduino data-lang=arduino><span class=n>sudo</span> <span class=n>systemctl</span> <span class=nf>stop</span> <span class=n>ssh</span>
</code></pre></div><h3 id=2-編輯-ssh-服務的啟動設定檔案例如使用-vimnano-編輯器>2. 編輯 SSH 服務的啟動設定檔案，例如使用 vim、nano 編輯器：</h3>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>sudo nano /etc/systemd/system/sshd.service
</code></pre></div><p>找到相關路徑是</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>/usr/sbin/sshd 
</code></pre></div><p>並且替換為</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>/usr/local/sbin/sshd 
</code></pre></div><p>如ExecStart等等參數</p>
<p>儲存設定檔案並退出編輯器</p>
<h3 id=3重新載入系統的-systemd-單位設定>3.重新載入系統的 systemd 單位設定：</h3>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>sudo systemctl daemon-reload
</code></pre></div><h3 id=4啟動-ssh-服務>4.啟動 SSH 服務：</h3>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>sudo systemctl start ssh
</code></pre></div><h3 id=5檢查當前使用版本>5.檢查當前使用版本</h3>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-arduino data-lang=arduino><span class=n>sudo</span> <span class=n>systemctl</span> <span class=n>status</span> <span class=n>ssh</span>
</code></pre></div><p>確認process的路徑是local的安裝路徑即可</p>
<p><strong>現在，系統應該會使用您手動安裝的 OpenSSH 伺服器版本了。</strong></p>
<h2>延伸閱讀</h2>
<ul>
<li><a href=/blog/posts/linux/linuxcommand/>[Linux] 常用指令整理</a></li>
</ul>